<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="" name="description">
    <meta content="" name="author">
    <script src="views/js/libs/jquery-3.4.1.min.js"></script>
    <title>SB Admin 2 - Login</title>

    <!-- Custom fonts for this template-->
    <link href="views/css/all.min.css" rel="stylesheet" type="text/css">
    <!--    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">-->

    <!-- Custom styles for this template-->
    <link href="views/css/sb-admin-2.min.css" rel="stylesheet">

</head>
<script>

    function ajaxCallBack(responseTxt, statusTxt, xhr) {
        if (statusTxt == "success") {
            let data = JSON.parse(responseTxt);
            if (data.firstName == undefined) {
                //document.getElementById("result").value = data.error;
                console.log(data.error);
            } else {
                //document.getElementById("result").value = " welcom ya " + data.firstName + " " + data.lastName;
                console.log("welcome ya : " + data.firstName + " , " + data.lastName);
            }
        }
    }

    function checkPassword(str) {
        var re = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}$/;
        return re.test(str);
    }

    function validateData() {
        $(".error").hide();
        let hasError = false;
        let emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        let emailblockReg =
            /^([\w-\.]+@(?!yahoo.com)(?!hotmail.com)([\w-]+\.)+[\w-]{2,4})?$/;

        let emailaddressVal = $("#email").val();
        let passwordVal = $("#password").val();

        if (emailaddressVal == '') {
            $("#email").after('<p style="color:red;font-weight:bold;font-size:12px;" class="error">Please enter your email address.</p>');
            hasError = true;
        } else if (!emailReg.test(emailaddressVal)) {
            $("#email").after('<p style="color:red;font-weight:bold;font-size:12px;" class="error">Enter a valid email address.</p>');
            hasError = true;
        } else if (passwordVal == '') {
            $("#password").after('<p style="color:red;font-weight:bold;font-size:12px;" class="error">Please enter your password.</p>');
            hasError = true;
        } else if (!emailblockReg.test(emailaddressVal)) {
            $("#email").after('<p style="color:red;font-weight:bold;font-size:12px;" class="error">No yahoo , hotmail emails.</p>');
            hasError = true

        } else if (!checkPassword(passwordVal)) {
            $("#password").after('<p style="color:red;font-weight:bold;font-size:12px;" class="error">No Numbers , No UperCase chars or too short</p>');
            hasError = true
        }

        if (hasError == true) {
            return false;
        }
    }

    $(document).ready(function () {

        $("#submitBtn").click(function () {
            if (validateData()) {
                let email = $("#email").val();
                let password = $("#password").val();
                //let jsonData = {"email": email, "password": password}
                $.post("LoginServlet",
                    {"email": email, "password": password}
                    , ajaxCallBack);
            }

        });
    });
</script>

<body class="bg-gradient-primary">

<div class="container">

    <!-- Outer Row -->
    <div class="row justify-content-center">

        <div class="col-xl-10 col-lg-12 col-md-9">

            <div class="card o-hidden border-0 shadow-lg my-5">
                <div class="card-body p-0">
                    <!-- Nested Row within Card Body -->
                    <div class="row">
                        <div class="col-lg-6 d-none d-lg-block bg-login-image"></div>
                        <div class="col-lg-6">
                            <div class="p-5">
                                <div class="text-center">
                                    <h1 class="h4 text-gray-900 mb-4">Welcome Back!</h1>
                                </div>
                                <form class="user">
                                    <div class="form-group">
                                        <input aria-describedby="emailHelp" class="form-control form-control-user"
                                               id="email" placeholder="Enter Email Address..." required type="email">
                                    </div>
                                    <div class="form-group">
                                        <input class="form-control form-control-user" id="password"
                                               placeholder="Password" required type="password">
                                    </div>
                                    <div class="form-group">
                                        <div class="custom-control custom-checkbox small">
                                            <input class="custom-control-input" id="customCheck" type="checkbox">
                                            <label class="custom-control-label" for="customCheck">Remember Me</label>
                                        </div>
                                    </div>
                                    <a class="btn btn-primary btn-user btn-block" id="submitBtn">
                                        Login
                                    </a>
                                    <hr>
                                    <a class="btn btn-google btn-user btn-block" href="index.html">
                                        <i class="fab fa-google fa-fw"></i> Login with Google
                                    </a>
                                    <a class="btn btn-facebook btn-user btn-block" href="index.html">
                                        <i class="fab fa-facebook-f fa-fw"></i> Login with Facebook
                                    </a>
                                </form>
                                <hr>
                                <div class="text-center">
                                    <a class="small" href="forgot-password.html">Forgot Password?</a>
                                </div>
                                <div class="text-center">
                                    <a class="small" href="register.html">Create an Account!</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>

</div>

<!-- Bootstrap core JavaScript-->
<script src="views/js/libs/jquery.min.js"></script>
<script src="views/js/libs/bootstrap.bundle.min.js"></script>

<!-- Core plugin JavaScript-->
<script src="views/js/libs/jquery.easing.min.js"></script>

<!-- Custom scripts for all pages-->
<script src="views/js/libs/sb-admin-2.min.js"></script>

</body>

</html>
